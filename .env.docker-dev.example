# Docker development environment for Baserow
# Used by: just dc-dev (docker-compose.dev.yml)
#
# This file is auto-created from .env.docker-dev.example when you run `just dc-dev`.
# For native local development (without Docker), use .env.local instead.
#
# DO NOT USE THIS FILE IN PRODUCTION.

# Compose profiles to enable. By default, all services including optional ones
# (storybook, flower) are started. Set to empty to disable optional services.
# See: https://docs.docker.com/compose/how-tos/profiles/
COMPOSE_PROFILES=optional

SECRET_KEY=baserow  # CHANGE THIS IN PRODUCTION!
DATABASE_PASSWORD=baserow
REDIS_PASSWORD=baserow

# Do not edit the following override, it is required to work with docker-compose.dev.yml.
BASEROW_PUBLIC_URL=
PRIVATE_BACKEND_URL=http://backend:8000

# In the Dev environment we set the next two variables to force the Caddy reverse proxy
# onto an unused port. We only want to use Caddy to serve media files and not act
# as a reverse proxy between your browser and Baserow.
WEB_FRONTEND_PORT=4000
WEB_FRONTEND_SSL_PORT=4443

PUBLIC_BACKEND_URL=http://localhost:8000
PUBLIC_WEB_FRONTEND_URL=http://localhost:3000
# If you change WEB_FRONTEND_PORT above you also need the change the 4000 here to match.
MEDIA_URL=http://localhost:4000/media/

# Optional PostgreSQL config for better performance (must be single line in .env files)
POSTGRES_DEV_EXTRA_ARGS=-c shared_buffers=512MB -c fsync=off -c full_page_writes=off -c synchronous_commit=off -c max_locks_per_transaction=512 -c logging_collector=off -c log_statement=none -c log_duration=off -c log_min_duration_statement=-1 -c log_checkpoints=off -c log_connections=off -c log_disconnections=off -c log_lock_waits=off -c log_temp_files=-1 -c checkpoint_timeout=1h -c max_wal_size=10GB -c min_wal_size=1GB -c wal_level=minimal -c max_wal_senders=0 -c autovacuum=off -c random_page_cost=1.0 -c effective_io_concurrency=200 -c work_mem=256MB -c maintenance_work_mem=512MB


POSTGRES_IMAGE_VERSION=14

# Settings for local dev with MinIO to have local s3-like object storage
# AWS_ACCESS_KEY_ID=<REDACTED>
# AWS_SECRET_ACCESS_KEY=<REDACTED>
# AWS_STORAGE_BUCKET_NAME=baserow
# AWS_S3_ENDPOINT_URL=http://YOUR_LOCAL_IP:9000
# AWS_S3_USE_SSL=off
# AWS_S3_CUSTOM_DOMAIN=
# AWS_DEFAULT_ACL=
# AWS_S3_VERIFY=off
# AWS_S3_SIGNATURE_VERSION = 's3v4'
# AWS_S3_ADDRESSING_STYLE = 'path'
